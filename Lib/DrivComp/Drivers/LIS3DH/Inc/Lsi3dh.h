#ifndef __Lsi3dh_h__
#define __Lsi3dh_h__

#include <string.h>
#include <stdlib.h>
#include "DrivCompTypes.h"
#include "main.h"

#define LIS3DH_NAME "lis3dh"
#define LIS3DH_SUPPORT_INTERFACE_SPI "spi"
#define LIS3DH_SUPPORT_INTERFACE_I2C "i2c"

enum LIS3DH_INTERFACE_TYPE {
	LIS3DH_NULL_TYPE,
	LIS3DH_SPI_TYPE,
	LIS3DH_I2C_TYPE,
};

enum Lis3dh_Operation {
	WRITE = 0b00000000,
	READ = 0b10000000,
};

enum Lis3dh_Register_Mapping_Address {
	LIS3DH_ADD_STATUS_REG_AUX = 0x07,
	LIS3DH_ADD_OUT_ADC1_L = 0x08,
	LIS3DH_ADD_OUT_ADC1_H = 0x09,
	LIS3DH_ADD_OUT_ADC2_L = 0x0A,
	LIS3DH_ADD_OUT_ADC2_H = 0x0B,
	LIS3DH_ADD_OUT_ADC3_L = 0x0C,
	LIS3DH_ADD_OUT_ADC3_H = 0x0D,

	LIS3DH_ADD_WHO_AM_I = 0x0F,
	LIS3DH_ADD_CTRL_REG0 = 0x1E,
	LIS3DH_ADD_TEMP_CFG_REG = 0x1F,
	LIS3DH_ADD_CTRL_REG1 = 0x20,
	LIS3DH_ADD_CTRL_REG2 = 0x21,
	LIS3DH_ADD_CTRL_REG3 = 0x22,
	LIS3DH_ADD_CTRL_REG4 = 0x23,
	LIS3DH_ADD_CTRL_REG5 = 0x24,
	LIS3DH_ADD_CTRL_REG6 = 0x25,
	LIS3DH_ADD_REFERENCE = 0x26,
	LIS3DH_ADD_STATUS_REG = 0x27,
	LIS3DH_ADD_OUT_X_L = 0x28,
	LIS3DH_ADD_OUT_X_H = 0x29,
	LIS3DH_ADD_OUT_Y_L = 0x2A,
	LIS3DH_ADD_OUT_Y_H = 0x2B,
	LIS3DH_ADD_OUT_Z_L = 0x2C,
	LIS3DH_ADD_OUT_Z_H = 0x2D,
	LIS3DH_ADD_FIFO_CTRL_REG = 0x2E,
	LIS3DH_ADD_FIFO_SRC_REG = 0x2F,
	LIS3DH_ADD_INT1_CFG = 0x30,
	LIS3DH_ADD_INT1_SRC = 0x31,
	LIS3DH_ADD_INT1_THS = 0x32,
	LIS3DH_ADD_INT1_DURATION = 0x33,
	LIS3DH_ADD_INT2_CFG = 0x34,
	LIS3DH_ADD_INT2_SRC = 0x35,
	LIS3DH_ADD_INT2_THS = 0x36,
	LIS3DH_ADD_INT2_DURATION = 0x37,
	LIS3DH_ADD_CLICK_CFG = 0x38,
	LIS3DH_ADD_CLICK_SRC = 0x39,
	LIS3DH_ADD_CLICK_THS = 0x3A,
	LIS3DH_ADD_TIME_LIMIT = 0x3B,
	LIS3DH_ADD_TIME_LATENCY = 0x3C,
	LIS3DH_ADD_TIME_WINDOW = 0x3D,
	LIS3DH_ADD_ACT_THS = 0x3E,
	LIS3DH_ADD_ACT_DUR = 0x3F,
};

enum Lis3dh_Register_Mapping_Value {
	LIS3DH_VAL_WHO_AM_I = 0b00110011,
	LIS3DH_VAL_CTRL_REG0 = 0b00010000,
	LIS3DH_VAL_TEMP_CFG_REG = 0b00000000,
	LIS3DH_VAL_CTRL_REG1 = 0b00000111,
	LIS3DH_VAL_CTRL_REG2 = 0b00000000,
	LIS3DH_VAL_CTRL_REG3 = 0b00000000,
	LIS3DH_VAL_CTRL_REG4 = 0b00000000,
	LIS3DH_VAL_CTRL_REG5 = 0b00000000,
	LIS3DH_VAL_CTRL_REG6 = 0b00000000,
	LIS3DH_VAL_REFERENCE = 0b00000000,

	LIS3DH_VAL_FIFO_CTRL_REG = 0b00000000,

	LIS3DH_VAL_INT1_CFG = 0b00000000,

	LIS3DH_VAL_INT1_THS = 0b00000000,
	LIS3DH_VAL_INT1_DURATION = 0b00000000,
	LIS3DH_VAL_INT2_CFG = 0b00000000,

	LIS3DH_VAL_INT2_THS = 0b00000000,
	LIS3DH_VAL_INT2_DURATION = 0b00000000,
	LIS3DH_VAL_CLICK_CFG = 0b00000000,

	LIS3DH_VAL_CLICK_THS = 0b00000000,
	LIS3DH_VAL_TIME_LIMIT = 0b00000000,
	LIS3DH_VAL_TIME_LATENCY = 0b00000000,
	LIS3DH_VAL_TIME_WINDOW = 0b00000000,
	LIS3DH_VAL_ACT_THS = 0b00000000,
	LIS3DH_VAL_ACT_DUR = 0b00000000,
};

enum Lis3dh_Param_Offset {
	LIS3DH_TYPE=24,
	LIS3DH_ADDR=16,
	LIS3DH_DATA=0,
};

typedef struct Lsi3dhParamType
{
	uint16_t data;
	uint8_t addr;
	uint8_t type;
}Lsi3dhParamType_t;


enum Lis3dh_Param_Type{
	LIS3DH_INIT_PARAM=0xa,
	LIS3DH_WRITE_PARAM=0xb,
	LIS3DH_REQUEST_PARAM=0xc,
};

enum Lis3dh_Default_Param {
	LIS3DH_DEF_SYSTEM_INIT_0,
	LIS3DH_DEF_SYSTEM_INIT_1,

	LIS3DH_DEF_REQUEST_0,
	LIS3DH_DEF_REQUEST_1,
	LIS3DH_DEF_REQUEST_2,
	LIS3DH_DEF_REQUEST_3,
	LIS3DH_DEF_REQUEST_4,
	LIS3DH_DEF_REQUEST_5,
	LIS3DH_DEF_REQUEST_6,
};

int Lis3dhDriverGetSupport(DriverTypes_t *AllDrivers, uint16_t MaxDrivers);

#endif //__Lsi3dh_h__